<div>
    <div class="title">
        <h3>Listing Courses</h3>
        <!-- <p-button label="Go Back" styleClass="ui-button-secondary"></p-button> -->
    </div>
    
    <p-table 
        id="courses-table" 
        [columns]="coursesTableColumns" 
        [value]="listedCourses" 
        [lazy]="true" 
        (onLazyLoad)="lazyLoadCourses($event)" 
        [paginator]="true" 
        [rows]="20" 
        [totalRecords]="totalRecords" 
        [loading]="loadingCourses">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns">
                    {{ col.header }}
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-course let-columns="columns">
            <tr class="datarow" (click)="showStudents(course)">
                <td *ngFor="let col of columns">
                    {{ course[col.field] }}
                </td>
            </tr>
        </ng-template>
    </p-table>

    <p-dialog header="Enrolled students:" 
        [(visible)]="displayStudents" 
        [modal]="true" 
        [style]="{width: '50vw'}" 
        [maximizable]="true" 
        [baseZIndex]="10000"
        [draggable]="false" 
        [resizable]="false">
        <p-table 
            id="course-students-table" 
            [columns]="studentsTableColumns" 
            [(value)]="listedStudents" 
            [paginator]="true" 
            [rows]="20" 
            [lazy]="true" 
            (onLazyLoad)="lazyLoadStudents($event)" 
            [totalRecords]="totalStudentRecords" 
            [loading]="loadingStudents">
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns">
                        {{ col.header }}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-student let-columns="columns">
                <tr>
                    <td *ngFor="let col of columns">
                        {{ student[col.field] }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-dialog>
</div>


